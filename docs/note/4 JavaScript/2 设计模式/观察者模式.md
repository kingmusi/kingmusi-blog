# 观察者模式

- 一个对象（ **Serve** ）维持一系列依赖于它的对象（ **Observer** ），当有关状态发生变更时 **Serve** 对象则通知一系列 **Observer** 对象进行更新
- ![](https://cdn.jsdelivr.net/gh/kingmusi/blogImages/img/观察者模式.png)

```js
/**
 * 被观察者：微信公众号
 */
class Server{
    constructor(){
        this.observers = [];
    }
    add(observer){ // 添加订阅的用户
        this.observers.push(observer)
    }
    remove(observer){ // 移除已订阅的用户
        this.observers = this.observers.filter(item => item != observer)
    }
    notify(msg){ // 向所有订阅的用户推送消息
        for(let item of this.observers){
            item.update(msg)
        }
    }
}
/**
 * 观察者：用户
 */
class Observer{
    constructor(usrename){
        this.usrename = usrename;
    }
    update(msg){
        console.log(`${this.usrename}接受到：${msg}`);
    }
}

const server = new Server();
const ZhangSan = new Observer('zhangsan')
const LiSi = new Observer('lisi')

server.add(ZhangSan)
server.add(LiSi)
server.notify('java是世界上最好的语言')
// ZhangSan看到这条消息后十分吃惊，果断取消订阅
server.remove(ZhangSan)
server.notify('javaScript是世界上最好的语言')
```



