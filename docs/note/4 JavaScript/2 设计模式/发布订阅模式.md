# 发布订阅模式

- 对象（ **Publisher** ）通过发布主题事件的方式通知各个订阅该主题的 **Subscriber** 对象
![](https://cdn.jsdelivr.net/gh/kingmusi/blogImages/img/发布订阅.png)



```js
class EventEmitter{
    constructor(){
        this.events = {} // 维护一个对象
    }
    /**
     * 订阅
     * @param {类型名} name 
     * @param {订阅的方法} fn 
     */
    on(name, fn){
        if(!this.events[name]){
            this.events[name] = [fn];
        }else{
            this.events[name].push(fn);
        }
    }
    /**
     * 发布
     * @param {类型名} name 
     * @param  {传入的参数} args 
     */
    emit(name, ...args){
        if(this.events[name]){
            this.events[name].forEach(item => {
                item.apply(this, args);
            })
        }else return false;
    }
    /**
     * 移除类型
     * @param {类型名} name 
     */
    remove(name){
        if(this.events[name]){
            delete this.events[name];
        }else return false;
    }
}
```

