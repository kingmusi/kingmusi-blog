# æšä¸¾ï¼ˆEnumï¼‰

## ğŸ“š æ€»ç»“

Python ä¸­çš„æšä¸¾ï¼ˆEnumï¼‰æ˜¯ä¸€ä¸ª**å¼ºå¤§çš„å·¥å…·**ï¼Œç”¨äºåˆ›å»º**å…·æœ‰å›ºå®šå€¼é›†åˆçš„ç±»**ã€‚æšä¸¾æä¾›äº†ä¸€ç§**æ¸…æ™°ã€ç±»å‹å®‰å…¨çš„æ–¹å¼**æ¥è¡¨ç¤ºä¸€ç»„ç›¸å…³çš„å¸¸é‡ï¼š

1. **ğŸ—ï¸ åŸºç¡€ç»“æ„**ï¼šç»§æ‰¿è‡ª `Enum` åŸºç±»ï¼Œåˆ›å»ºå›ºå®šå€¼é›†åˆï¼ˆå¯ä»¥ä½¿ç”¨ `auto()` è‡ªåŠ¨ç”Ÿæˆ ï¼‰
2. **ğŸ”’ ä¸å¯å˜æ€§**ï¼šä¿è¯æšä¸¾å€¼åœ¨è¿è¡Œæ—¶ä¸å¯ä¿®æ”¹ï¼Œä½¿ç”¨ `@unique` ç¡®ä¿æšä¸¾å€¼å”¯ä¸€
3. **ğŸ“‹ å±æ€§è®¿é—®**ï¼šé€šè¿‡ `name` å’Œ `value` å±æ€§è·å–ä¿¡æ¯
4. **ğŸ” ç±»å‹ç†è§£**ï¼šåŒºåˆ†æšä¸¾æˆå‘˜ã€åå­—å’Œå€¼çš„ä¸åŒç±»å‹
5. **ğŸ”„ éå†èƒ½åŠ›**ï¼šæ”¯æŒç›´æ¥è¿­ä»£æ‰€æœ‰æšä¸¾æˆå‘˜
6. **â­ æšä¸¾è¿ç®—**ï¼šé€šè¿‡ `==` ã€`is` æ¯”è¾ƒæšä¸¾å€¼æ˜¯å¦ç›¸ç­‰ï¼Œä½¿ç”¨ `IntEnum` è¿›è¡Œå¤§å°æ¯”è¾ƒ
7. ğŸ’¼ **å®é™…åº”ç”¨**ï¼šæšä¸¾+æšä¸¾èƒ½åŠ›å°è£…ä¸¾ä¾‹

> ğŸ“Œ **æ³¨æ„**ï¼šæšä¸¾åŠŸèƒ½ä» Python 3.4 ç‰ˆæœ¬å¼€å§‹æ”¯æŒ

## 1. æšä¸¾åŸºç±»ï¼ˆEnumï¼‰ ğŸ—ï¸

### åŸºæœ¬è¯­æ³•

```python
from enum import Enum

# ç±»åˆ›å»º
class Color(Enum):
    RED = 1
    GREEN = 2
    BLUE = 3
    
# å‡½æ•°å¼APIåˆ›å»ºæšä¸¾
Animal = Enum('Animal', 'DOG CAT BIRD FISH')

# æˆ–è€…ä½¿ç”¨å­—å…¸
ResponseCode = Enum('ResponseCode', {
    'SUCCESS': 200,
    'NOT_FOUND': 404,
    'ERROR': 500
})
```

### `auto()` è‡ªåŠ¨åˆ†é…

```python
from enum import Enum, auto

class Operation(Enum):
    ADD = auto()
    SUBTRACT = auto()
    MULTIPLY = auto()
    DIVIDE = auto()

# æŸ¥çœ‹è‡ªåŠ¨åˆ†é…çš„å€¼
for op in Operation:
    print(f"{op.name} = {op.value}")

# è¾“å‡ºï¼š
# ADD = 1
# SUBTRACT = 2
# MULTIPLY = 3
# DIVIDE = 4
```

> ğŸ“Œ **ç‰ˆæœ¬æ”¯æŒ**ï¼š`auto()` åŠŸèƒ½ä» Python 3.6 ç‰ˆæœ¬å¼€å§‹æ”¯æŒ
>
> ğŸ’¡ **é‡ç‚¹**ï¼šæšä¸¾æˆå‘˜çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆæ•´æ•°ã€å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰ï¼‰

## 2. æšä¸¾å€¼ä¸å¯æ”¹å˜ ğŸ”’

æšä¸¾çš„ä¸€ä¸ª**æ ¸å¿ƒç‰¹æ€§**æ˜¯å…¶å€¼åœ¨åˆ›å»ºå**æ— æ³•è¢«ä¿®æ”¹**ï¼Œè¿™ç¡®ä¿äº†æ•°æ®çš„**å®Œæ•´æ€§å’Œä¸€è‡´æ€§**ã€‚

### å€¼ä¸å¯å˜

```python
from enum import Enum

class Priority(Enum):
    LOW = 1
    MEDIUM = 2
    HIGH = 3

# âŒ å°è¯•ä¿®æ”¹æšä¸¾å€¼ - è¿™å°†æŠ›å‡ºå¼‚å¸¸
try:
    Priority.LOW = 10
except AttributeError as e:
    print(f"é”™è¯¯ï¼š{e}")
    # è¾“å‡ºï¼šé”™è¯¯ï¼šCannot reassign members.

# âŒ å°è¯•åˆ é™¤æšä¸¾æˆå‘˜ - è¿™ä¹Ÿå°†æŠ›å‡ºå¼‚å¸¸
try:
    del Priority.LOW
except AttributeError as e:
    print(f"é”™è¯¯ï¼š{e}")
    # è¾“å‡ºï¼šé”™è¯¯ï¼šCannot delete members.
```

### å€¼å”¯ä¸€

ä½¿ç”¨ `@unique` è£…é¥°å™¨ç¡®ä¿å”¯ä¸€æ€§

```python
from enum import Enum, unique

@unique
class Color(Enum):
    RED = 1
    GREEN = 2
    BLUE = 3
    # CRIMSON = 1  # å¦‚æœå–æ¶ˆæ³¨é‡Šï¼Œä¼šæŠ›å‡º ValueError
```

> âš ï¸ **æ³¨æ„**ï¼šæšä¸¾çš„ä¸å¯å˜æ€§æ˜¯å…¶è®¾è®¡çš„é‡è¦ç‰¹æ€§ï¼Œç¡®ä¿äº†ç¨‹åºä¸­å¸¸é‡çš„ç¨³å®šæ€§

## 3. è·å–æšä¸¾å€¼å’Œåå­— ğŸ“‹

### è·å–æšä¸¾çš„åå­—å’Œå€¼

```python
from enum import Enum

class Direction(Enum):
    NORTH = "N"
    SOUTH = "S"
    EAST = "E"
    WEST = "W"

# è·å–æšä¸¾æˆå‘˜çš„åå­—
print(Direction.NORTH.name)    # è¾“å‡ºï¼šNORTH

# è·å–æšä¸¾æˆå‘˜çš„å€¼
print(Direction.NORTH.value)   # è¾“å‡ºï¼šN
```

### é€šè¿‡å€¼è·å–æšä¸¾æˆå‘˜

```python
# é€šè¿‡å€¼è·å–æšä¸¾æˆå‘˜
north_direction = Direction("N")
print(north_direction)         # è¾“å‡ºï¼šDirection.NORTH
print(north_direction.name)    # è¾“å‡ºï¼šNORTH

# æˆ–è€…ä½¿ç”¨å­—å…¸è¯­æ³•
east_direction = Direction["EAST"]
print(east_direction)          # è¾“å‡ºï¼šDirection.EAST
print(east_direction.value)    # è¾“å‡ºï¼šE
```

## 4. ç±»å‹åŒºåˆ«ï¼š`type(Enum.xx.name)` vs `type(Enum.xx)` ğŸ”

è¿™æ˜¯ä¸€ä¸ª**é‡è¦çš„æ¦‚å¿µå·®å¼‚**ï¼Œéœ€è¦**æ·±å…¥ç†è§£**æšä¸¾æˆå‘˜çš„å±æ€§ç±»å‹ã€‚

```python
from enum import Enum

class Color(Enum):
    RED = 1
    GREEN = 2
    BLUE = 3

# æ£€æŸ¥ name å±æ€§çš„ç±»å‹
print(f"Color.RED.name çš„ç±»å‹ï¼š{type(Color.RED.name)}")
# è¾“å‡ºï¼šColor.RED.name çš„ç±»å‹ï¼š<class 'str'>

# æ£€æŸ¥æšä¸¾æˆå‘˜æœ¬èº«çš„ç±»å‹
print(f"Color.RED çš„ç±»å‹ï¼š{type(Color.RED)}")
# è¾“å‡ºï¼šColor.RED çš„ç±»å‹ï¼š<enum 'Color'>

# æ£€æŸ¥ value å±æ€§çš„ç±»å‹
print(f"Color.RED.value çš„ç±»å‹ï¼š{type(Color.RED.value)}")
# è¾“å‡ºï¼šColor.RED.value çš„ç±»å‹ï¼š<class 'int'>
```

> ğŸ“ **æ€»ç»“**ï¼š
> - `name` å±æ€§æ€»æ˜¯è¿”å› **å­—ç¬¦ä¸²ç±»å‹**
> - `value` å±æ€§è¿”å›**å®šä¹‰æ—¶æŒ‡å®šçš„ç±»å‹**
> - æšä¸¾æˆå‘˜æœ¬èº«æ˜¯**æšä¸¾ç±»çš„å®ä¾‹**

## 5. å¯éå†ç‰¹æ€§ ğŸ”„

æšä¸¾ç±»æ”¯æŒ**ç›´æ¥éå†**ï¼Œè¿™ä½¿å¾—**æ‰¹é‡å¤„ç†æšä¸¾æˆå‘˜**å˜å¾—éå¸¸ä¾¿æ·ã€‚

```python
from enum import Enum

class HttpStatus(Enum):
    OK = 200
    NOT_FOUND = 404
    SERVER_ERROR = 500

# è·å–æ‰€æœ‰æˆå‘˜åç§°
names = [status.name for status in HttpStatus]
print(f"çŠ¶æ€åç§°ï¼š{names}")
# è¾“å‡ºï¼šçŠ¶æ€åç§°ï¼š['OK', 'NOT_FOUND', 'SERVER_ERROR']

# è·å–æ‰€æœ‰æˆå‘˜å€¼
values = [status.value for status in HttpStatus]
print(f"çŠ¶æ€ç ï¼š{values}")
# è¾“å‡ºï¼šçŠ¶æ€ç ï¼š[200, 404, 500]

# ä½¿ç”¨ list() è½¬æ¢
all_statuses = list(HttpStatus)
print(f"æ‰€æœ‰çŠ¶æ€ï¼š{all_statuses}") # [<HttpStatus.OK: 200>, <HttpStatus.NOT_FOUND: 404>, <HttpStatus.SERVER_ERROR: 500>]
```

## 6. æšä¸¾è¿ç®— â­

### æšä¸¾æ¯”è¾ƒå’Œç›¸ç­‰æ€§

```python
from enum import Enum

class Size(Enum):
    SMALL = 1
    MEDIUM = 2
    LARGE = 3

# ç›¸ç­‰æ€§æ¯”è¾ƒ
print(Size.SMALL == Size.SMALL)    # True
print(Size.SMALL == Size.MEDIUM)   # False

# èº«ä»½æ¯”è¾ƒ
print(Size.SMALL is Size.SMALL)    # True

# âŒ ä¸æ”¯æŒå¤§å°æ¯”è¾ƒï¼ˆä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰
try:
    print(Size.SMALL < Size.MEDIUM)
except TypeError as e:
    print(f"é”™è¯¯ï¼š{e}")
```

### `IntEnum` ç”¨äºæ•°å€¼æ¯”è¾ƒ

```python
from enum import IntEnum

class Priority(IntEnum):
    LOW = 1
    MEDIUM = 2
    HIGH = 3

# IntEnum æ”¯æŒæ•°å€¼æ¯”è¾ƒ
print(Priority.LOW < Priority.HIGH)     # True
print(Priority.MEDIUM >= Priority.LOW)  # True

# ä¹Ÿå¯ä»¥ä¸æ•´æ•°æ¯”è¾ƒ
print(Priority.HIGH == 3)               # True
print(Priority.LOW < 5)                 # True
```

> ğŸ’¡ **å»ºè®®**ï¼šå½“éœ€è¦è¿›è¡Œ**æ•°å€¼æ¯”è¾ƒ**æ—¶ï¼Œä½¿ç”¨ `IntEnum`ï¼›å½“åªéœ€è¦**æ ‡è¯†ç¬¦**æ—¶ï¼Œä½¿ç”¨æ™®é€šçš„ `Enum`

## 7. å®é™…åº”ç”¨ç¤ºä¾‹ ğŸ’¼

```python
from enum import Enum, auto

class UserRole(Enum):
    """ç”¨æˆ·è§’è‰²æšä¸¾"""
    ADMIN = auto()
    MODERATOR = auto()
    USER = auto()
    GUEST = auto()
    
    def has_permission(self, action):
        """æ£€æŸ¥è§’è‰²æƒé™"""
        permissions = {
            UserRole.ADMIN: ['read', 'write', 'delete', 'manage'],
            UserRole.MODERATOR: ['read', 'write', 'delete'],
            UserRole.USER: ['read', 'write'],
            UserRole.GUEST: ['read']
        }
        return action in permissions.get(self, [])

# ä½¿ç”¨ç¤ºä¾‹
user_role = UserRole.USER
print(f"ç”¨æˆ·è§’è‰²ï¼š{user_role.name}")
print(f"å¯ä»¥å†™å…¥ï¼š{user_role.has_permission('write')}")  # True
print(f"å¯ä»¥åˆ é™¤ï¼š{user_role.has_permission('delete')}")  # False
```
