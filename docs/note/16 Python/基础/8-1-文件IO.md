# ğŸ“ æ–‡ä»¶IO

> **markmap æ€ç»´å¯¼å›¾**ï¼ˆå¯ç”¨äº markmap å·¥å…·ï¼‰

```markmap
# Python3 æ–‡ä»¶IO
## ğŸ“‚ æ–‡ä»¶æ‰“å¼€
- open('file', 'r')
- with è¯­å¥
- æ¨¡å¼ï¼šr/w/a/x/b
## ğŸ“„ æ–‡ä»¶è¯»å–
- read()
- readline()
- readlines()
## âœï¸ æ–‡ä»¶å†™å…¥ä¸è¿½åŠ 
- w/a/x æ¨¡å¼
- with è‡ªåŠ¨å…³é—­
## ğŸ§Š äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œ
- rb/wb/ab æ¨¡å¼
- bytes ç±»å‹
- ç¼–ç ä¸è§£ç 
## âš ï¸ æ³¨æ„äº‹é¡¹
- with è¯­å¥
- å¼‚å¸¸å¤„ç†
- ç¼–ç ä¸€è‡´
```

---

## ğŸ“‚ æ‰“å¼€æ–‡ä»¶

Python é€šè¿‡å†…ç½®çš„ `open()` å‡½æ•°æ¥è¿›è¡Œæ–‡ä»¶æ“ä½œã€‚å¸¸ç”¨çš„æ¨¡å¼æœ‰ï¼š

- `"r"`ï¼šåªè¯»æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
- `"w"`ï¼šå†™å…¥æ¨¡å¼ï¼Œä¼šåˆ›å»ºæ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼Œè¦†ç›–åŸæœ‰å†…å®¹
- `"a"`ï¼šè¿½åŠ æ¨¡å¼ï¼Œåœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼‰
- `"x"`ï¼šç‹¬å åˆ›å»ºæ¨¡å¼ï¼Œåªèƒ½ç”¨äºæ–°å»ºæ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æŠ¥é”™ï¼ˆPython 3.3+ æ”¯æŒï¼‰
- `"b"`ï¼šäºŒè¿›åˆ¶æ¨¡å¼ï¼ˆå¯ä¸å…¶ä»–æ¨¡å¼ç»„åˆï¼Œå¦‚ `"rb"`ã€`"wb"`ï¼‰

```python
'''1. æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶æ‰‹åŠ¨å…³é—­'''

file = open('test.txt', 'r')
print(file.read())
file.close()
'''2. ä½¿ç”¨ with å…³é”®å­—ï¼Œwithè¯­å¥ä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶'''

with open('test.txt', 'r') as file:
  print(file.read())
```

> âš¡ **é‡ç‚¹**ï¼šæ¨èä½¿ç”¨ `with` è¯­å¥ç®¡ç†æ–‡ä»¶ï¼Œèƒ½è‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œé¿å…èµ„æºæ³„æ¼ã€‚


## ğŸ“„ æ–‡ä»¶è¯»å–

#### è¯»å–æ–‡æœ¬æ–‡ä»¶

```python
with open('example.txt', 'r', encoding='utf-8') as f:
    content = f.read()
    print(content)
```
#### æŒ‰è¡Œè¯»å–

```python
with open('example.txt', 'r', encoding='utf-8') as f:
    for line in f:
        print(line.strip())
```
> **æ³¨æ„**ï¼š`line.strip()` å¯ä»¥å»é™¤æ¯è¡Œæœ«å°¾çš„æ¢è¡Œç¬¦ã€‚

- `file.read()` è¯»å–æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚
- `file.readline()` è¯»å–æ–‡ä»¶çš„ä¸€è¡Œå†…å®¹ã€‚
- `file.readlines()` è¯»å–æ–‡ä»¶æ‰€æœ‰è¡Œï¼Œè¿”å›ä¸€ä¸ªåŒ…å«è¡Œå†…å®¹çš„åˆ—è¡¨ã€‚

## âœï¸ æ–‡ä»¶å†™å…¥ä¸è¿½åŠ 

#### å†™å…¥æ–‡æœ¬æ–‡ä»¶

```python
with open('output.txt', 'w', encoding='utf-8') as f:
    f.write('Hello, Python!\n')
    f.write('æ–‡ä»¶å†™å…¥ç¤ºä¾‹ã€‚')
```
#### è¿½åŠ å†…å®¹

```python
with open('output.txt', 'a', encoding='utf-8') as f:
    f.write('\nè¿½åŠ å†…å®¹ã€‚')
```
#### åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¹¶å†™å…¥ï¼ˆå¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™æŠ¥é”™ï¼‰

```python
with open('output.txt', 'x', encoding='utf-8') as f:
    f.write('æ–°å†…å®¹ã€‚')
```

## ğŸ§Š äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œ

äºŒè¿›åˆ¶æ–‡ä»¶å¸¸ç”¨äºå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰éæ–‡æœ¬æ•°æ®çš„è¯»å†™ã€‚

#### 1. è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶

```python
with open('image.png', 'rb') as f:
    data = f.read()
    print(data[:20])  # æ‰“å°å‰20ä¸ªå­—èŠ‚
```
**é‡ç‚¹**ï¼š`'rb'` æ¨¡å¼è¯»å–åˆ°çš„æ˜¯ `bytes` ç±»å‹æ•°æ®ã€‚

#### 2. å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶

```python
with open('text.txt', 'wb') as f:
    f.write(b"hello")
```
**é‡ç‚¹**ï¼š`'wb'` æ¨¡å¼å†™å…¥çš„å†…å®¹å¿…é¡»æ˜¯ `bytes` ç±»å‹ã€‚

#### 3. è¿½åŠ äºŒè¿›åˆ¶å†…å®¹

```python
with open('data.bin', 'ab') as f:
    f.write(b"more data")
```
**é‡ç‚¹**ï¼š`'ab'` æ¨¡å¼ç”¨äºäºŒè¿›åˆ¶è¿½åŠ å†™å…¥ã€‚

#### 4. äºŒè¿›åˆ¶å†…å®¹çš„è½¬ç ä¸è§£ç 

- **ç¼–ç ï¼ˆencodeï¼‰**ï¼šå­—ç¬¦ä¸² â†’ äºŒè¿›åˆ¶
- **è§£ç ï¼ˆdecodeï¼‰**ï¼šäºŒè¿›åˆ¶ â†’ å­—ç¬¦ä¸²

```python
text = "ä½ å¥½ï¼ŒPythonï¼"
# ç¼–ç 
binary_data = text.encode('utf-8')
print(binary_data)  # b'\xe4\xbd\xa0\xe5\xa5\xbd\xef\xbc\x8cPython\xef\xbc\x81'

# è§£ç 
decoded_text = binary_data.decode('utf-8')
print(decoded_text)  # ä½ å¥½ï¼ŒPythonï¼
```
## ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†ç¤ºä¾‹

æ–‡ä»¶æ“ä½œæ—¶å¸¸è§å¼‚å¸¸å¦‚ `FileNotFoundError`ï¼Œå¯ä»¥ç”¨ try-except æ•è·ï¼š

```python
try:
    with open('nofile.txt', 'r') as f:
        print(f.read())
except FileNotFoundError:
    print("æ–‡ä»¶ä¸å­˜åœ¨ï¼")
```