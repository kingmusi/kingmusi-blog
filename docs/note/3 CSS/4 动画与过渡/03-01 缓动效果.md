# 缓动效果

## 效果描述

模拟了**橡皮筋**或**弹簧**释放后的物理运动

- **运动过程**：动画对象会快速移动向目标值，并**冲过（Overshoot）**目标点，然后反弹回来，经过几次逐渐减弱的震荡，最终停在目标位置。
- **视觉感受**：具有很强的弹性、果冻感和有机感，常用于增加 UI 交互的趣味性（如按钮弹窗、图标出现的动画）。

:::dom

```html
<div class="container">
  <div class="box"></div>
</div>
```

```css
.container {
  width: 100px;
  height: fit-content;
  padding: 20px;
  border: 1px solid #ccc;
  
  .box {
		width: 20px;
    height: 20px;
    background: deeppink;
    border-radius: 50%;
  }
}
```

```js
const box = document.querySelector('.box')

const script = document.createElement("script");
script.src = 'https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js';
document.body.appendChild(script);
script.addEventListener('load', () => {
  gsap.to(box, {
    duration: 2,
    x: 100,
    ease: 'elastic.out(1, 0.5)',
    repeat: -1
  })
})
```

:::

## 单次回弹

`cubic-bezier()`，在 x 轴上只能在 **[0, 1]** 区间变化，但 `y 轴却是可以突破这个区间`的，从而使其经历一个比最终值更大的状态

![](https://cdn.musiblog.com/CSS/%E5%8A%A8%E7%94%BB%E4%B8%8E%E8%BF%87%E6%B8%A1/%E5%8D%95%E6%AC%A1%E7%BC%93%E5%8A%A8%E5%87%BD%E6%95%B0.webp)

上面动画曲线代码可以通过[cubic-bezier网站获取和调整](https://cubic-bezier.com/#.21,.1,.18,1.42)：`cubic-bezier(.21,.1,.18,1.42)`

:::dom

```html
<div class="container">
  <div class="box"></div>
</div>
```

```css
@keyframes elastic {
  from { transform: translateX(0); }
  100% { transform: translateX(100px) }
}

.container {
  width: 100px;
  height: fit-content;
  padding: 20px;
  border: 1px solid #ccc;
  
  .box {
		width: 20px;
    height: 20px;
    background: deeppink;
    border-radius: 50%;
    animation: elastic 2s cubic-bezier(.21,.1,.18,1.42) infinite;
  }
}
```

:::

应用例子：有回弹效果的生动气泡提示框

:::demo

```html
<label>
    <input type="text" placeholder="聚焦试试">
    <span>这是一个简单的气泡提示框</span>
</label>
```

```css
/* 主要代码 */
/* 注意，收缩回去的时候，同样会过渡，如果使用缓动效果，会整个框镜像反转 */
input:not(:focus) + span {
    transform: scale(0);
    transition-timing-function: ease; /* 回缩时用正常的调速函数 */
}
label span {
    transition: transform .3s cubic-bezier(.25,.1,.3,1.5);
    transform-origin: 10px -7px;
}

label {
  position: relative;
  
  span {
    position: absolute;
    bottom: -10px;
    left: 0;
		display: block;
    padding: 4px;
    border: 1px solid pink;
    translate: 0 100%;
    border-radius: 8px;
    white-space: nowrap;
  }
}
```

:::

## 多次回弹

如果想要更生动的多次回弹效果（如一开始例子效果），可以使用 `gsap` 库，并把 `ease` 设置为 `elastic.out(振幅, 周期)` 函数：

- **参数 1：振幅 (Amplitude)**
  - 控制“冲过头”的幅度大小。
  - 数值越大，回弹的力度越强，冲过目标点的距离越远。
- **参数 2：周期 (Period)**
  - 控制弹跳的频率（即震荡的快慢）。
  - 数值越**小**，震荡的频率越高（弹得越快、次数越多）。
  - 数值越**大**，震荡越平缓。

```js
gsap.to(".box", {
  x: 300,
  duration: 2,
  ease: "elastic.out(1.5, 0.2)" // 振幅1.5，周期0.2
});
```

