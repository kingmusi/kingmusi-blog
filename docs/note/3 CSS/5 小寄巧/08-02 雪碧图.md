# 雪碧图

## 理念和优缺点

#### 理念：将多个⼩图⽚拼接到⼀个图⽚中。通过 `background-position` 和元素尺⼨调节需要显示的背景图案。

#### 优点：

1. 减少 `HTTP `请求数，极⼤地提⾼⻚⾯加载速度 (HTTP1的情况下)
2. 增加图⽚信息重复度，提⾼压缩⽐，减少图⽚⼤⼩
3. 更换⻛格⽅便，只需在⼀张或⼏张图⽚上样式

#### 缺点：

1. 图⽚合并麻烦
2. 维护麻烦，修改⼀个图⽚可能需要从新布局整个图⽚，样式

## 例子

#### 下面是一张雪碧图

![](https://cdn.musiblog.com/CSS/%E5%B0%8F%E5%AF%84%E5%B7%A7/%E9%9B%AA%E7%A2%A7%E5%9B%BE.webp)

:::demo

```html
<div></div>
<ul>
    <li>上</li>
    <li>下</li>
    <li>左</li>
    <li>右</li>
</ul>
```

```less
div {
    width: 100px;
    height: 100px;
    /** 偏移！！！ */
    background-position: -25px -20px;
    background-image: url('https://cdn.musiblog.com/CSS/%E5%B0%8F%E5%AF%84%E5%B7%A7/%E9%9B%AA%E7%A2%A7%E5%9B%BE.webp');
}

/** 不用看，下面是按钮的样式 */
ul {
    position: relative;
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 70px;
    margin-top: 10px;
    li {
        position: absolute;
        width: 30px;
        line-height: 30px;
        text-align: center;
        background-color: hsl(26, 95%, 54%);
        color: #fff;
        border-radius: 6px;
        user-select: none;
        cursor: pointer;
        transition: all .2s ease-in-out;
        &:hover {
            background-color: lighten(hsl(26, 95%, 54%), 20%);
        }
        
        &:nth-of-type(1) {
            top: 0;
            left: 35px;
        }
        &:nth-of-type(2) {
            top: 35px;
            left: 35px;
        }
        &:nth-of-type(3) {
            top: 35px;
            left: 0px;
        }
        &:nth-of-type(4) {
            top: 35px;
            left: 70px;
        }
    }
}
```

```js
const ul = document.querySelector('ul')
const div = document.querySelector('div')
let left = -25, top = -20
ul.addEventListener('pointerdown', (e) => {
    const target = e.target
   	if (target.matches('li')) {
        switch (target.textContent.trim()) {
            case '上':
                top += 148
                if (top > 0) {
                    top = -316
                } 
                break
            case '下':
                top -= 148
                if (top < -316) {
                    top = -20
                }
                break
            case '左':
                left += 148
                if (left > 0) {
                    left = -907
                }
                break
            case '右':
                left -= 148
                if (left < -907) {
                    left = -20
                }
                break
        }
        div.style.backgroundPosition = `${left}px ${top}px`
    }
})
```

:::