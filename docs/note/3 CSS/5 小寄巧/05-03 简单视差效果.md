# 视差效果

## 效果

视觉差效果是一种比较炫酷的网站效果，是指多个元素块以不同的速度移动，形成立体的运动效果，给人视觉上形成一种视觉差的效果

:::dom no-img

```vue
<template>
  <div class="container">
    <template v-for="(text, i) of texts" :key="i">
      <div class="img" :style="{ backgroundImage: `url('/banner/${i + 1}.webp')` }"></div>
      <div class="text">{{ text }}</div>
    </template>
    <div class="img" :style="{ backgroundImage: `url('/banner/${texts.length + 1}.webp')` }"></div>
  </div>
</template>

<script setup>
const texts = [
  '视觉差效果是一种比较炫酷的网站效果',
  '是指多个元素块以不同的速度移动，形成立体的运动效果，给人视觉上形成一种视觉差的效果'
]
</script>

<style scoped lang="less">
.container {
  width: 31rem;
  aspect-ratio: 16 / 9;
  overflow: auto;
}
.img {
  width: 31rem;
  aspect-ratio: 16 / 9;
  background-attachment: fixed;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}
.text {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 31rem;
  aspect-ratio: 16 / 9;
  padding: 2rem;
  box-sizing: border-box;
  background: #f5f5f5;
  color: #000;
  font-size: 24px;
  text-align: center;
}
</style>
```
:::

## `background-attachment`

作用：规定背景图像是否固定或者随着页面的其余部分滚动。

属性：

| 值      | 描述                                                       |
| :------ | :--------------------------------------------------------- |
| scroll  | 默认值。背景相对于元素本身固定，而不是随着它的内容滚动。           |
| fixed   | 背景相对于视口固定。即使一个元素拥有滚动机制，背景也不会随着元素的内容滚动。   |
| local   | 背景图像会随着元素内容的滚动而移动。                       |

#### `scroll`

背景相对于滚动container来说，是固定的，不会随着它的内容滚动

:::dom no-img
```vue
<template>
  <ul>
    <li v-for="i in 10" :key="i">{{ i }}</li>
  </ul>
</template>

<style scoped>
ul {
  width: 200px;
  height: 100px;
  margin: 0 auto;
  color: #000;
  overflow: auto;
  background-image: url('/banner/1.webp');
  background-size: cover;
}
</style>
```
:::

#### `local`

背景图像会随着元素内容的滚动而移动

:::dom no-img
```vue
<template>
  <ul>
    <li v-for="i in 10" :key="i">{{ i }}</li>
  </ul>
</template>

<style scoped>
ul {
  width: 200px;
  height: 100px;
  margin: 0 auto;
  color: #000;
  overflow: auto;
  background-image: url('/banner/1.webp');
  background-size: cover;
  background-attachment: local;
}
</style>
```
:::

#### `fixed`

背景相对于视口固定

:::dom no-img
```vue
<template>
  <ul>
    <li v-for="i in 10" :key="i">{{ i }}</li>
  </ul>
</template>

<style scoped>
ul {
  width: 200px;
  height: 100px;
  margin: 0 auto;
  color: #000;
  overflow: auto;
  background-image: url('/banner/1.webp');
  background-size: cover;
  background-attachment: fixed;
}
</style>
```
:::


## `background-attachment: fixed`

通过将背景图像的 `background-attachment` 属性设置为 `fixed`，可以实现简单的视差效果。这种方法最常见，实现简单，但它只能作用于背景图片。

:::demo

```vue
<template>
  <div class="container">
    <template v-for="(text, i) of texts" :key="i">
      <div class="img" :style="{ backgroundImage: `url('/banner/${i + 1}.webp')` }"></div>
      <div class="text">{{ text }}</div>
    </template>
    <div class="img" :style="{ backgroundImage: `url('/banner/${texts.length + 1}.webp')` }"></div>
  </div>
</template>

<script setup>
const texts = [
  '视觉差效果是一种比较炫酷的网站效果',
  '是指多个元素块以不同的速度移动，形成立体的运动效果，给人视觉上形成一种视觉差的效果'
]
</script>

<style scoped lang="less">
.container {
  width: 31rem;
  aspect-ratio: 16 / 9;
  overflow: auto;
}
.img {
  width: 31rem;
  aspect-ratio: 16 / 9;
  /* 背景机遇视口固定 */
  background-attachment: fixed;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}
.text {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 31rem;
  aspect-ratio: 16 / 9;
  padding: 2rem;
  box-sizing: border-box;
  background: #f5f5f5;
  color: #000;
  font-size: 24px;
  text-align: center;
}
</style>
```
:::

