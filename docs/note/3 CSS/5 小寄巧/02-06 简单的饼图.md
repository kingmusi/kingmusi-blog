# 简单的饼图

## 基于 **transform** 方案

用伪元素覆盖上去，通过旋转决定露出多大扇形区

![](https://cdn.musiblog.com/CSS/%E5%B0%8F%E5%AF%84%E5%B7%A7/%E9%A5%BC%E5%9B%BE-transform.webp)

> 一个`负的延时值`是合法的。与 **0s** 的延时类似，它意味着动画会立即开始播放，但会**自动前进到延时值的绝对值处**，就好像动画在过去已经播放了指定的时间一样。因此实际效果就是动画跳过指定时间而从中间开始播放了

用负的动画延时来直接跳至动画中的任意时间点，并且定格在那里，以此来实现按照比率来显示饼图

这里的动画永远处于暂停状态，指定的持续时间并不会产生任何副作用

:::demo
```css
.box {
    /* 饼图颜色 */
    --color: yellowgreen;
    /* 饼图背景颜色 */
    --bg-color: rgb(105 90 87);

    position: relative;
    width: 100px;
    aspect-ratio: 1;
    border-radius: 50%;
    background: var(--bg-color);
    background-image: linear-gradient(to right, transparent 50%, var(--color) 0);
}

@keyframes spin {
    to { transform: rotate(.5turn); }
}
@keyframes bg {
    50% { background: var(--color); }
}

.box::after {
    content: '';
    position: absolute;
    top: 0; left: 50%;
    width: 50%;
    height: 100%;
    border-radius: 0 100% 100% 0 / 50%;
    background-color: inherit;
    transform-origin: left;
    animation: spin 50s linear infinite, bg 100s step-end infinite;
    animation-play-state: paused;
    animation-delay: -60s; /* 通过此控制比例 */
}
```

```html
<div class="box"></div>
```
:::

```js
// 通过 js 控制比例
box.style.animatinoDelay = '-' + 比例 + 's';
```

## **svg** 解决方案

主要是 **stroke-dasharray** 可使描边有间隔，可以把间隔设为`周长`，然后改变描边的周长，即可形成对应比率的饼图（和进度条实现相似）

:::demo
```html
<svg viewBox="0 0 32 32">
    <circle r="16" cx="16" cy="16" />
</svg>
```

```css
svg {
    width: 100px;
    height: 100px;
    transform: rotate(-90deg);
    background: yellowgreen;
    border-radius: 50%;
}

circle {
    fill: yellowgreen;
    stroke: #655;
    stroke-width: 32; /* 这个是半径占满整个圆 */
    stroke-dasharray: 38 100; /* 可得比率为 38% 的扇区 */
}
```
:::

## conic-gradient

使用 `conic-gradient` 可以轻松实现饼图，甚至是多色饼图，不过可能会有版本兼容问题

:::demo

```css
div {
    width: 100px;
    aspect-ratio: 1;
    border-radius: 50%;
    background: conic-gradient(
        #ff6b6b 0deg 120deg,
        #4ecdc4 120deg 240deg,
        #1a535c 240deg 360deg
    );
}
```

```html
<div></div>
```

:::

